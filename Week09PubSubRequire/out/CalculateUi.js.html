<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: CalculateUi.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: CalculateUi.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @author Baba Kofi Weusijana
 */

// Publisher
define([ 'jquery', 'tinyPubSub' ], function() {
	'use strict';
	/**
	 * The point is that there is no reference to subscribers &amp; publishers in
	 * this module and yet they can communicate messages.
	 * 
	 * @exports CalculateUi
	 */

	var UPDATEUI_TOPIC = "updateUI";

	var CalculateUi = function() {
		if (DEBUG)
			console.log("Publisher CalculateUi constructor called.");
		if (DEBUG) {
			$("#debugMessageDisplay").show();
			$("#debugDetailMessageDisplay").show();
		}
		$("#add").click(opButtonClickHandler);
		$("#subtract").click(opButtonClickHandler);
		$("#multiply").click(opButtonClickHandler);
		$("#divide").click(opButtonClickHandler);
		$.subscribe(UPDATEUI_TOPIC, updateUI);
		$.publish('debug', {
			message : "Publisher CalculateUi constructor called"
		});
	};

	var validateAndParseInput = function(input) {
		if (input != undefined &amp;&amp; input != null &amp;&amp; input != "") {
			input = parseFloat(input);
			if (isNaN(input)) {
				return undefined;
			}
			return input;
		}
		return undefined;
	};

	var opButtonClickHandler = function(event) {
		var operationTopic = $(this).attr("id");
		if (DEBUG)
			console.log("Publisher opButtonClickHandler method called by:",
					operationTopic);
		$.publish('debugDetail', 'CalculateUi.opButtonClickHandler called by '
				+ String(this));
		// First gather the user input.
		$("#flash").empty();
		var op1 = $("#operand1").val();
		if (DEBUG)
			console.log("op1:", op1);
		op1 = validateAndParseInput(op1);
		if (op1 === undefined) {
			$("#flash").html("Your first operand is not a number.");
			return;
		}
		var op2 = $("#operand2").val();
		if (DEBUG)
			console.log("op2:", op2);
		op2 = validateAndParseInput(op2);
		if (op2 === undefined) {
			$("#flash").html("Your second operand is not a number.");
			return;
		}
		// It should then publish a request for an object that can add the two
		// numbers.
		// It should pass both numbers in the request.
		// It should also provide a means for any subscriber to send back an
		// answer
		// (by reversing roles and publishing the answer).
		$.publish(operationTopic, [ op1, op2, UPDATEUI_TOPIC ]);
	};

	var updateUI = function(event, answer) {
		if (DEBUG)
			console.log("updateUI called with event:", event);
		if (DEBUG)
			console.log("answer:", answer);
		if (answer != undefined &amp;&amp; answer != null) {
			if (!isNaN(answer) || answer == Infinity) {
				$("#answer").hide().val(answer).show();
			}
		}
	};

	return {
		CalculateUi : CalculateUi
	};

});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="module-CalculateUi.html">CalculateUi</a></li></ul><h3>Global</h3><ul><li><a href="global.html#DEBUG">DEBUG</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha4</a> on Sun Mar 16 2014 10:43:24 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
